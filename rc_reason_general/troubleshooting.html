

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FAQs and troubleshooting &mdash; Tutorials, FAQs &amp; more 0.5.0-40-g2a9c4f8
 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="../_static/css/default.css" type="text/css" />
  

  

  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Tutorials, FAQs &amp; more 0.5.0-40-g2a9c4f8
 documentation" href="../index.html"/>
        <link rel="up" title="rc_reason general tutorials" href="overview.html"/>
        <link rel="next" title="ItemPick tutorials" href="../rc_itempick/overview.html"/>
        <link rel="prev" title="Configuring a load carrier" href="load_carrier_setup.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>


<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Tutorials, FAQs & more
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rc_visard_general/overview.html">rc_visard tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">rc_reason general tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="load_carrier_setup.html">Configuring a load carrier</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">FAQs and troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rc_itempick/overview.html">ItemPick tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_silhouette/overview.html">SilhouetteMatch tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_collision_check/overview.html">CollisionCheck tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_urcap/overview.html">Universal Robots tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/overview.html">KUKA robot tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tutorials, FAQs & more</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Tutorials, FAQs & more</a> &gt;</li>
        
          <li><a href="overview.html">rc_reason general tutorials</a> &gt;</li>
        
      <li>FAQs and troubleshooting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="faqs-and-troubleshooting">
<span id="loadcarrier-faq"></span><h1>FAQs and troubleshooting<a class="headerlink" href="#faqs-and-troubleshooting" title="Permalink to this headline">¶</a></h1>
<p class="toggle-header" id="loadcarrier-faq-lc-rim-not-visible"><strong>The load carrier rim is not visible in the depth image</strong></p>
<div class="toggle-content docutils container">
<p>One common case for missing the rim in depth images takes place when one of the edges of the
load carrier is parallel to the baseline of the stereo system. It can be easily determined if
this the case by slightly rotating the load carrier and observing if the
orientation has an effect on the appearance of the object in the depth image.
When this happens, the <a class="reference internal" href="../rc_visard_general/projector.html#general-projector"><span class="std std-ref">rc_randomdot projector</span></a> can be
added to the <em>rc_visard</em> to increase the depth image density.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/load_carrier_rim_missing.png"><img alt="../_images/load_carrier_rim_missing.png" src="../_images/load_carrier_rim_missing.png" style="width: 500px;" /></a>
</div>
</div>
<p class="toggle-header" id="loadcarrier-faq-lc-not-detected"><strong>The load carrier is not detected or not detected robustly</strong></p>
<div class="toggle-content docutils container">
<blockquote>
<div><ul>
<li><p class="first">Is the load carrier fully visible in both the left and right camera image?</p>
</li>
<li><p class="first">Does the load carrier rim appear in the depth image? (cfr. <a class="reference internal" href="load_carrier_setup.html#loadcarrier-detect-lc"><span class="std std-ref">Detecting the load carrier</span></a>)</p>
</li>
<li><p class="first">Is the load carrier inside the region of interest (if specified)?</p>
</li>
<li><p class="first">Are the dimensions of the load carrier model correct? (cfr. <a class="reference internal" href="load_carrier_setup.html#loadcarrier-add-lc"><span class="std std-ref">Add a new load carrier</span></a>)</p>
<p>The manufacturer’s dimensions might not be completely accurate. If the load carrier is not
detected, we recommended to double check the configured dimensions.
Additionally, one can try increasing the <code class="docutils literal notranslate"><span class="pre">model_tolerance</span></code> parameter (e.g.
to the maximum value).</p>
</li>
<li><p class="first">Make sure the <code class="docutils literal notranslate"><span class="pre">min_plausibility</span></code> parameter is not set too high.</p>
</li>
<li><p class="first"><a class="reference internal" href="#loadcarrier-faq-lc-not-on-horizontal-surface"><span class="std std-ref">The load carrier is not on a horizontal surface</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="#loadcarrier-faq-lc-deformed"><span class="std std-ref">The load carrier is deformed</span></a></p>
</li>
</ul>
</div></blockquote>
</div>
<p class="toggle-header" id="loadcarrier-faq-lc-not-on-horizontal-surface"><strong>The load carrier is not placed on a horizontal surface</strong></p>
<div class="toggle-content docutils container">
<p>By default, the LoadCarrier module assumes that the load carrier is located on a horizontal
surface. If that’s not the case, one needs set the <code class="docutils literal notranslate"><span class="pre">assume_gravity_aligned</span></code> parameter to false.</p>
<p>Alternatively, one can provide the load carrier orientation as a prior
with the load carrier model. The orientation prior can be set in the
Web GUI’s <span class="menuselection">Modules ‣ LoadCarrier</span> page and via the REST-API, which is
described in the following.</p>
<p>Two sample cases are shown in <a class="reference internal" href="#fig-loadcarrier-faq-tilted-lc"><span class="std std-numref">Fig. 17</span></a> for the <em>external</em> pose frame
(left) and the <em>camera</em> pose frame (right).</p>
<div class="figure align-center" id="id1">
<span id="fig-loadcarrier-faq-tilted-lc"></span><a class="reference internal image-reference" href="../_images/load_carrier_tilted.png"><img alt="../_images/load_carrier_tilted.png" src="../_images/load_carrier_tilted.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">Load carrier not placed on a horizontal surface</span></p>
</div>
<p>In the left case of <a class="reference internal" href="#fig-loadcarrier-faq-tilted-lc"><span class="std std-numref">Fig. 17</span></a>, the load carrier (<code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-ext</span></code>)
is rotated by an angle <span class="math notranslate nohighlight">\(\theta\)</span> around the <span class="math notranslate nohighlight">\(y\)</span>
axis of the <em>external</em> coordinate system. The load carrier orientation is given by the
following quaternion: <span class="math notranslate nohighlight">\(\left[0, \sin(\theta/2), 0, \cos(\theta/2)\right]\)</span>.</p>
<blockquote>
<div><p class="toggle-header"><strong>Request to the REST-API for configuring tilted-load-carrier-ext</strong></p>
<div class="toggle-content docutils container">
<p>Here we make the assumption that <code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-ext</span></code> has the same dimensions of
<code class="docutils literal notranslate"><span class="pre">my-load-carrier-1</span></code> (cfr. <a class="reference internal" href="load_carrier_setup.html#loadcarrier-solid-rim"><span class="std std-ref">Load carriers with a solid rim</span></a>) and that the
angle <span class="math notranslate nohighlight">\(\theta\)</span> is 30 deg.</p>
<p>To trigger the <code class="docutils literal notranslate"><span class="pre">set_load_carrier</span></code> service via the REST-API for <code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-ext</span></code>,
one needs to send a PUT request to the URL
<code class="docutils literal notranslate"><span class="pre">http://&lt;rc-visard-ip&gt;/api/v2/nodes/rc_load_carrier_db/services/set_load_carrier</span></code>,
where <code class="docutils literal notranslate"><span class="pre">&lt;rc-visard-ip&gt;</span></code> should be replaced by the actual IP of the <em>rc_visard</em>.</p>
<p>The PUT body should include the following data, in JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;load_carrier&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;tilted-load-carrier-ext&quot;</span><span class="p">,</span>
      <span class="nt">&quot;outer_dimensions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
        <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mf">0.22</span>
      <span class="p">},</span>
      <span class="nt">&quot;inner_dimensions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mf">0.37</span><span class="p">,</span>
        <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mf">0.215</span>
      <span class="p">},</span>
      <span class="nt">&quot;pose_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
      <span class="nt">&quot;pose&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;orientation&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">0.25882</span><span class="p">,</span>
          <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mf">0.96593</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pose_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ORIENTATION_PRIOR&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div></blockquote>
<p>In the right case of <a class="reference internal" href="#fig-loadcarrier-faq-tilted-lc"><span class="std std-numref">Fig. 17</span></a>, the load carrier
(<code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-cam</span></code>) is parallel to the image plane.
Its orientation in the <em>camera</em> coordinate system is
<span class="math notranslate nohighlight">\(\left[\sqrt(2)/2, -\sqrt(2)/2, 0, 0\right]\)</span>.</p>
<blockquote>
<div><p class="toggle-header"><strong>Request to the REST-API for configuring tilted-load-carrier-cam</strong></p>
<div class="toggle-content docutils container">
<p>Here we make the assumption that <code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-cam</span></code> has the same dimensions of
<code class="docutils literal notranslate"><span class="pre">my-load-carrier-1</span></code> (cfr. <a class="reference internal" href="load_carrier_setup.html#loadcarrier-solid-rim"><span class="std std-ref">Load carriers with a solid rim</span></a>).</p>
<p>To trigger the <code class="docutils literal notranslate"><span class="pre">set_load_carrier</span></code> service via the REST-API for <code class="docutils literal notranslate"><span class="pre">tilted-load-carrier-ext</span></code>,
one needs to send a PUT request to the URL
<code class="docutils literal notranslate"><span class="pre">http://&lt;rc-visard-ip&gt;/api/v2/nodes/rc_load_carrier_db/services/set_load_carrier</span></code>,
where <code class="docutils literal notranslate"><span class="pre">&lt;rc-visard-ip&gt;</span></code> should be replaced by the actual IP of the <em>rc_visard</em>.</p>
<p>The PUT body should include the following data, in JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;load_carrier&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;tilted-load-carrier-cam&quot;</span><span class="p">,</span>
      <span class="nt">&quot;outer_dimensions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
        <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mf">0.22</span>
      <span class="p">},</span>
      <span class="nt">&quot;inner_dimensions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mf">0.37</span><span class="p">,</span>
        <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">0.27</span><span class="p">,</span>
        <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mf">0.215</span>
      <span class="p">},</span>
      <span class="nt">&quot;pose_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;camera&quot;</span><span class="p">,</span>
      <span class="nt">&quot;pose&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;orientation&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mf">0.70711</span><span class="p">,</span>
          <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mf">-0.70711</span><span class="p">,</span>
          <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pose_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ORIENTATION_PRIOR&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div></blockquote>
<p>The value of the <code class="docutils literal notranslate"><span class="pre">assume_gravity_aligned</span></code> parameter will be ignored for load carriers with an orientation prior set.</p>
</div>
<p class="toggle-header" id="loadcarrier-faq-lc-deformed"><strong>The load carrier is deformed</strong></p>
<div class="toggle-content docutils container">
<p>One can try increasing the <code class="docutils literal notranslate"><span class="pre">model_tolerance</span></code> parameter (e.g.
to the maximum value).</p>
<p>For significantly deformed load carriers, the detection algorithm might not provide reliable
results. This can for example be the case of cardboard boxes after several uses.
An alternative for such cases is to fix the load carrier placement and specify
the exact pose of the load carrier (please see <a class="reference internal" href="load_carrier_setup.html#setting-lc-pose"><span class="std std-ref">Setting the exact pose or an orientation prior of a load carrier</span></a> for further discussion).</p>
</div>
<p class="toggle-header" id="loadcarrier-faq-grasps-on-lc-floor"><strong>The load carrier floor is detected as load carrier content</strong></p>
<div class="toggle-content docutils container">
<p>This means that either the load carrier <span class="math notranslate nohighlight">\(z\)</span> inner dimension is too large or the
reconstruction of the load carrier floor is noisy.</p>
<p>To improve the detection result as shown in <a class="reference internal" href="#fig-loadcarrier-faq-load-carrier-floor"><span class="std std-numref">Fig. 18</span></a>,
two options are available:</p>
<blockquote>
<div><ul class="simple">
<li>Decrease the load carrier <span class="math notranslate nohighlight">\(z\)</span> inner dimension</li>
<li>Increase the <code class="docutils literal notranslate"><span class="pre">crop_distance</span></code> parameter (recommended for noisy data)</li>
</ul>
</div></blockquote>
<div class="figure align-center" id="id2">
<span id="fig-loadcarrier-faq-load-carrier-floor"></span><a class="reference internal image-reference" href="../_images/load_carrier_floor.png"><img alt="../_images/load_carrier_floor.png" src="../_images/load_carrier_floor.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">Removing detection of the bin floor</span></p>
</div>
</div>
<p class="toggle-header" id="loadcarrier-faq-no-grasps-on-lc-floor"><strong>Objects on the load carrier floor are not detected as load carrier content</strong></p>
<div class="toggle-content docutils container">
This means that either the load carrier <span class="math notranslate nohighlight">\(z\)</span> inner dimension is too small or the
the <code class="docutils literal notranslate"><span class="pre">crop_distance</span></code> parameter is too large.</div>
<p class="toggle-header" id="loadcarrier-faq-multiple-lcs"><strong>There are multiple load carriers of the same type in the scene</strong></p>
<div class="toggle-content docutils container">
The LoadCarrier module detects all load carriers matching the given load carrier model
with each <code class="docutils literal notranslate"><span class="pre">detect_load_carrier</span></code> or <code class="docutils literal notranslate"><span class="pre">detect_filling_level</span></code> request.
However, when a load carrier is used with the <em>rc_reason</em> modules, only a
single load carrier will be detected. If there are multiple load carriers of
the same type in the scene, we recommended to specify
one ore more regions of interest, each one including one load carrier instance.</div>
<p class="toggle-header" id="loadcarrier-faq-speed-up-for-static-lc"><strong>My load carrier doesn’t move. How do I speed up my application?</strong></p>
<div class="toggle-content docutils container">
One can reduce the estimation time for grasp points or object detections
inside the load carrier by avoiding repeated load-carrier detection over
multiple frames. The pose of the load carrier can be estimated once and
then set as an exact pose. Subsequent grasp point computations or object
detections use this exact pose, without requiring any load carrier detection
anymore. Please see <a class="reference internal" href="load_carrier_setup.html#setting-lc-pose"><span class="std std-ref">Setting the exact pose or an orientation prior of a load carrier</span></a> for further discussion.</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rc_itempick/overview.html" class="btn btn-neutral float-right" title="ItemPick tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="load_carrier_setup.html" class="btn btn-neutral" title="Configuring a load carrier" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Roboception GmbH.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.0-40-g2a9c4f8',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/js/open-toggle.js"></script>
      <script type="text/javascript" src="../_static/contentui.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>