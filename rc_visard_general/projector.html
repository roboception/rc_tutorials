

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Obtain dense depth images with the rc_randomdot projector &mdash; Tutorials, FAQs &amp; more 0.5.0-23-gb8c2f87
 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="../_static/css/default.css" type="text/css" />
  

  

  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Tutorials, FAQs &amp; more 0.5.0-23-gb8c2f87
 documentation" href="../index.html"/>
        <link rel="up" title="rc_visard tutorials" href="overview.html"/>
        <link rel="next" title="rc_reason general tutorials" href="../rc_reason_general/overview.html"/>
        <link rel="prev" title="Getting started with the rc_visard and OpenCV" href="opencv_example.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>


<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Tutorials, FAQs & more
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">rc_visard tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="network_setup.html">Network configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html">Tuning of image parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_recording.html">Recording data for evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="opencv_example.html">Getting started with the <em>rc_visard</em> and OpenCV</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Obtain dense depth images with the <em>rc_randomdot</em> projector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-we-start">Before we start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mounting-the-projector">Mounting the projector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#focusing-the-projector">Focusing the projector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-projector-brightness">Configuring the projector brightness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-projector-working-mode">Selecting projector working mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#single-shot-mode">Single shot mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#continuous-mode">Continuous mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-exposure">Configuring the exposure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-optimization-tricks">More optimization tricks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rc_reason_general/overview.html">rc_reason general tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_itempick/overview.html">ItemPick tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_silhouette/overview.html">SilhouetteMatch tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_collision_check/overview.html">CollisionCheck tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_urcap/overview.html">Universal Robots tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/overview.html">KUKA robot tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tutorials, FAQs & more</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Tutorials, FAQs & more</a> &gt;</li>
        
          <li><a href="overview.html">rc_visard tutorials</a> &gt;</li>
        
      <li>Obtain dense depth images with the <em>rc_randomdot</em> projector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="obtain-dense-depth-images-with-the-projector">
<span id="general-projector"></span><h1>Obtain dense depth images with the <em>rc_randomdot</em> projector<a class="headerlink" href="#obtain-dense-depth-images-with-the-projector" title="Permalink to this headline">¶</a></h1>
<p>This tutorial shows how to set up the <em>rc_visard</em> with the
<a class="reference external" href="https://roboception.com/product/random-dot-projector/">rc_randomdot projector</a> to increase the
density of depth images, as shown in <a class="reference internal" href="#fig-general-projector-compare"><span class="std std-numref">Fig. 12</span></a>.
This is particularly recommended for objects and workspaces with little or no visual texture.</p>
<div class="figure align-center" id="id1">
<span id="fig-general-projector-compare"></span><a class="reference internal image-reference" href="../_images/projector_compare.png"><img alt="../_images/projector_compare.png" src="../_images/projector_compare.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">A scene including objects without visual texture (i.e. the intensity of the image
is uniform over large parts of the scene) and the computed depth image without the <em>rc_randomdot</em> projector (center)
and with the <em>rc_randomdot</em> projector (right).</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial assumes that the previous tutorial <a class="reference internal" href="parameters.html#general-tuning-image-parameters"><span class="std std-ref">Tuning of image parameters</span></a>
has been completed.</p>
</div>
<div class="section" id="before-we-start">
<span id="general-projector-before"></span><h2>Before we start<a class="headerlink" href="#before-we-start" title="Permalink to this headline">¶</a></h2>
<p>Before going through this tutorial, the following prerequisites should be met.</p>
<ol class="arabic simple">
<li>The <em>rc_visard</em> is running the latest firmware (version 22.04)
and the <em>rc_visard</em>’s license includes the
<a class="reference external" href="https://roboception.com/product/rc_reason-iocontrol/">IOControl module</a>.
This can be verified on the <span class="menuselection">System ‣ Firmware &amp; License</span> page of the Web GUI.</li>
<li>The <em>rc_randomdot</em> projector, the network cable connecting it to the <em>rc_visard</em>, and a
24 V, 60 W power supply are available.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please ensure that a 24 V, 60 W power supply is used for powering
the <em>rc_visard</em> and the <em>rc_randomdot</em> projector together.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>rc_randomdot</em> projector is controlled via the GPIO Out 1 of the <em>rc_visard</em>
(see <a class="reference external" href="https://doc.rc-visard.com/latest/en/iocontrol.html#sect-iocontrol" title="(in rc_visard v22.04)"><span>IO and Projector Control</span></a>).
In this tutorial, Out 1 mode refers to the <em>rc_randomdot</em> projector mode.</p>
</div>
</div>
<div class="section" id="mounting-the-projector">
<span id="general-projector-mounting"></span><h2>Mounting the projector<a class="headerlink" href="#mounting-the-projector" title="Permalink to this headline">¶</a></h2>
<p>Mounting the projector is described in detail in the projector’s manual. Please
see <a class="reference external" href="https://doc.rc-randomdot.com/en/installation.html" title="(in rc_randomdot v01)"><span>Installation</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For projectors sold until 12/2020, the mounting instructions are available on the
<a class="reference external" href="https://roboception.com/wp-content/uploads/2020/09/202008_rc_randomdot_quickstart_guide.pdf">Roboception website</a>.</p>
</div>
</div>
<div class="section" id="focusing-the-projector">
<span id="general-projector-focus"></span><h2>Focusing the projector<a class="headerlink" href="#focusing-the-projector" title="Permalink to this headline">¶</a></h2>
<p>For the focus configuration, one should turn the <em>rc_randomdot</em> projector permanently on.
This can be done on the <span class="menuselection">Configuration ‣ IOControl</span> page of the Web GUI
by setting the Out 1 mode to <em>High</em>.</p>
<p>Before focusing the projector, one needs to remove the lens protection tube temporarily.
Please unscrew the lens protection tube patently, until the rings of the lens are visible.
Now, the focus can be adjusted by rotating one of the rings of the lens until
the random dot pattern is sharp (<a class="reference internal" href="#fig-general-projector-focus"><span class="std std-numref">Fig. 13</span></a>).</p>
<div class="figure align-center" id="id2">
<span id="fig-general-projector-focus"></span><a class="reference internal image-reference" href="../_images/projector_focus.png"><img alt="../_images/projector_focus.png" src="../_images/projector_focus.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text">Blurred (left) and sharp (right) random dot pattern.</span></p>
</div>
</div>
<div class="section" id="configuring-the-projector-brightness">
<span id="general-projector-aperture"></span><h2>Configuring the projector brightness<a class="headerlink" href="#configuring-the-projector-brightness" title="Permalink to this headline">¶</a></h2>
<p>For tuning the projector brightness, one should set the Out 1 mode to
<em>ExposureAlternateActive</em> on the <span class="menuselection">Configuration ‣ IOControl</span> page of the Web GUI.
Next, on the <strong>Camera</strong> page, the exposure must be set to <em>Auto</em> and
the <em>Auto Exposure Mode</em> to <em>AdaptiveOut1</em>.</p>
<p>The text line under the live images on the <strong>Camera</strong> page now shows the <em>Out1
Reduction</em> value in percent. This value describes the reduction of brightness
of the image without projection as compared to the image with projection. The
value should be between 25% to 50%. If the value is outside this range, the
brightness of the projector should be adapted.</p>
<p>For adapting the projector brightness, the aperture ring of the projector
lens can be adjusted by rotating it.</p>
<p>After a basic adjustment, the darkest object that is possible in the application
should be placed in the field of view of the sensor. If the dark object is
not properly visible in the depth image on the <strong>Depth Image</strong> page of the Web GUI,
then the projector brightness must be increased, despite high reduction values.</p>
</div>
<div class="section" id="selecting-projector-working-mode">
<span id="general-projector-out1-mode"></span><h2>Selecting projector working mode<a class="headerlink" href="#selecting-projector-working-mode" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-shot-mode">
<h3>Single shot mode<a class="headerlink" href="#single-shot-mode" title="Permalink to this headline">¶</a></h3>
<p>If the projector is used in combination with rc_reason modules (ItemPick, BoxPick or SilhouetteMatch),
it can work in a single shot mode.
This means that it will only be activated on demand when the module requests a new depth image.</p>
<p>This mode is enabled by setting the <em>Acquisition Mode</em> to <em>Single + Out1</em> in the <strong>Depth Image</strong>
page of the Web GUI.</p>
</div>
<div class="section" id="continuous-mode">
<h3>Continuous mode<a class="headerlink" href="#continuous-mode" title="Permalink to this headline">¶</a></h3>
<p>If the projector has to be used in continuous mode (stereo matching is performed continuously without a trigger),
the proper Out 1 mode in the Web GUI’s <span class="menuselection">Configuration ‣ IOControl</span> page has to be set.</p>
<p>By default, the Out 1 mode of the <em>rc_visard</em> is set to <em>Low</em>, i.e. projector is off.</p>
<p>Typically, the user needs to select the <em>ExposureAlternateActive</em> Out 1 mode, in which the
<em>rc_randomdot</em> projector is on only for the exposure time of every second image. Images with projected
pattern are used for computing depth images. Images without projected pattern can be used
as texture or for other image processing modules.</p>
</div>
</div>
<div class="section" id="configuring-the-exposure">
<span id="general-projector-exposure"></span><h2>Configuring the exposure<a class="headerlink" href="#configuring-the-exposure" title="Permalink to this headline">¶</a></h2>
<p>As last step, one needs to go back to the Web GUI’s <strong>Camera</strong> page and set the exposure time,
either manually, as explained in the <a class="reference internal" href="parameters.html#general-exposure-gain"><span class="std std-ref">Exposure and Gain Settings</span></a> section of the <a class="reference internal" href="parameters.html#general-tuning-image-parameters"><span class="std std-ref">Tuning of image parameters</span></a> tutorial,
or automatically using the auto exposure.
In this case, the <em>Auto Exposure Mode</em> should be set to <em>AdaptiveOut1</em> to avoid over exposure due to the projector.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the exposure is configured to automatic mode, when the projector is turned on, it may take
a few seconds until the exposure and gain settings become stable.</p>
</div>
</div>
<div class="section" id="more-optimization-tricks">
<span id="general-projector-tricks"></span><h2>More optimization tricks<a class="headerlink" href="#more-optimization-tricks" title="Permalink to this headline">¶</a></h2>
<p>In some cases, the density of the depth image can be further optimized by changing the focus of
the <em>rc_randomdot</em> projector to introduce some blur in the projected pattern.
This can be done while looking at the <em>Confidence</em> image in the Web GUI’s <strong>Depth Image</strong>
page and trying to obtain as many white pixels as possible.</p>
<p>If the camera image includes highlights that are not reconstructed in the depth image
(<a class="reference internal" href="#fig-general-projector-highlights"><span class="std std-numref">Fig. 14</span></a>), one can
verify whether these highlights are introduced by the <em>rc_randomdot</em> projector (e.g. by simply turning the
projector off). In such cases, we recommend using the <em>Double-Shot</em> mode that is available
on the <strong>Depth Image</strong> page.</p>
<p>Alternatively, the mounting of the <em>rc_randomdot</em> projector could be changed in order to have a different
angle between the <em>rc_visard</em> and the projector itself. Reducing the aperture of the projector
can also help in removing highlights.</p>
<div class="figure align-center" id="id3">
<span id="fig-general-projector-highlights"></span><a class="reference internal image-reference" href="../_images/projector_highlights.png"><img alt="../_images/projector_highlights.png" src="../_images/projector_highlights.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">Highlight in the camera image due to the <em>rc_randomdot</em> projector.</span></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rc_reason_general/overview.html" class="btn btn-neutral float-right" title="rc_reason general tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="opencv_example.html" class="btn btn-neutral" title="Getting started with the rc_visard and OpenCV" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Roboception GmbH.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.0-23-gb8c2f87',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/js/open-toggle.js"></script>
      <script type="text/javascript" src="../_static/contentui.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>