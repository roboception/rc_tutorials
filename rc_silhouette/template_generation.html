

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Template generation &mdash; Tutorials, FAQs &amp; more 0.5.0-28-g66594de
 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="../_static/css/default.css" type="text/css" />
  

  

  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Tutorials, FAQs &amp; more 0.5.0-28-g66594de
 documentation" href="../index.html"/>
        <link rel="up" title="SilhouetteMatch tutorials" href="overview.html"/>
        <link rel="next" title="Getting started with SilhouetteMatch" href="getting_started.html"/>
        <link rel="prev" title="SilhouetteMatch tutorials" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>


<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Tutorials, FAQs & more
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rc_visard_general/overview.html">rc_visard tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_reason_general/overview.html">rc_reason general tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_itempick/overview.html">ItemPick tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">SilhouetteMatch tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Template generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-the-object-model">Obtaining the object model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dxf-file">DXF file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cad-model">CAD model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#with-the-rc-visard">With the <em>rc_visard</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#measuring-the-object-height">Measuring the object height</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-the-object-orientation-needed">Is the object orientation needed?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recording-the-scene">Recording the scene</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">With the <em>rc_visard</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#without-the-rc-visard">Without the <em>rc_visard</em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting started with SilhouetteMatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">FAQs and troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rc_collision_check/overview.html">CollisionCheck tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_urcap/overview.html">Universal Robots tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/overview.html">KUKA robot tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tutorials, FAQs & more</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Tutorials, FAQs & more</a> &gt;</li>
        
          <li><a href="overview.html">SilhouetteMatch tutorials</a> &gt;</li>
        
      <li>Template generation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="template-generation">
<span id="silhouettematch-template-generation"></span><h1>Template generation<a class="headerlink" href="#template-generation" title="Permalink to this headline">¶</a></h1>
<p>The SilhouetteMatch module requires special object templates for each type
of object to be detected. Roboception offers a template generation service on their
<a class="reference external" href="https://roboception.com/en/template-request/">website</a>, where the user can
request these object templates. Alternatively, if you have a DXF file of your object,
you can directly create the template on the <em>rc_visard</em>, see <a class="reference internal" href="#dxf-file">DXF File</a>.</p>
<p>This tutorial shows how to gather the data required to request and
generate a new object template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Object templates for simple shapes such as rectangles, circles and hexagons, can be
directly generated by the user using the scripts and instructions provided on
<a class="reference external" href="https://github.com/roboception/rcsilhouette_template_from_primitive">Roboception’s GitHub page</a>.</p>
</div>
<div class="section" id="obtaining-the-object-model">
<h2>Obtaining the object model<a class="headerlink" href="#obtaining-the-object-model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dxf-file">
<h3>DXF file<a class="headerlink" href="#dxf-file" title="Permalink to this headline">¶</a></h3>
<p>If you have a DXF drawing of your object, you can create the template directly
on the <em>rc_visard</em>. To do so, open the Web GUI and navigate to <span class="menuselection">Modules ‣ SilhouetteMatch</span>.</p>
<p>At the bottom of the page, you’ll find a list of currently installed templates.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/template_list.png"><img alt="../_images/template_list.png" src="../_images/template_list.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text">List of available SilhouetteMatch templates</span></p>
</div>
<p>To create a new template from a given DXF file, press the “+” button. A window will
open, allowing you to upload and configure a DXF file.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../_images/template_dxf_wizard.png"><img alt="../_images/template_dxf_wizard.png" src="../_images/template_dxf_wizard.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text">Configuration window for creating a template from a DXF file</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, only DXF files consisting of a single layer are allowed.</p>
</div>
<p>For the “Object Height” parameter, please see <a class="reference internal" href="#measuring-the-object-height">Measuring the object height</a>.
The created template can then be used for detections.</p>
</div>
<div class="section" id="cad-model">
<h3>CAD model<a class="headerlink" href="#cad-model" title="Permalink to this headline">¶</a></h3>
<p>Sending the CAD model of the part is the easiest and most straightforward way of providing the object model.
The model does not have to include any information about inner parts, texture or material.
A 2D model of the object could also be used, as long as all edges that should be used for matching are visible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The origin of the generated template is based on the reference frame of the model.</p>
</div>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../_images/cad_model.png"><img alt="../_images/cad_model.png" src="../_images/cad_model.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 26 </span><span class="caption-text">Sample CAD model with its reference frame.</span></p>
</div>
</div>
<div class="section" id="with-the-rc-visard">
<h3>With the <em>rc_visard</em><a class="headerlink" href="#with-the-rc-visard" title="Permalink to this headline">¶</a></h3>
<p>If the CAD model of the object is not available or it cannot be sent,
it is also possible to generate a template based on data captured with an <em>rc_visard</em>.</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../_images/template_scene.jpg"><img alt="../_images/template_scene.jpg" src="../_images/template_scene.jpg" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text">Sample setup scene for template generation.</span></p>
</div>
<p>The procedure for recording the required data consists of the following steps:</p>
<ol class="arabic">
<li><p class="first">Place the object on a flat, monochrome surface in contrasting color.</p>
</li>
<li><p class="first">Place 3 <a class="reference external" href="https://doc.rc-visard.com/latest/en/tagdetect.html#sect-apriltag" title="(in rc_visard v24.01)"><span class="xref std std-ref">AprilTags</span></a> on the surface to form a triangle around the object.
A sample background with AprilTags can be downloaded <a class="reference external" href="http://roboception.com/wp-content/uploads/2019/09/april_tags.pdf">here</a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../rc_visard_general/network_setup.html#general-network"><span class="std std-ref">Connect the rc_visard to your PC</span></a> and open the <strong>Camera</strong> page in the Web GUI.</p>
</li>
<li><p class="first">Place the <em>rc_visard</em> perpendicular to the flat surface on which the object lies.
The recommended distance of the <em>rc_visard</em> to the surface depends on the <em>rc_visard</em> model:</p>
<blockquote>
<div><ul class="simple">
<li>approximately 300 mm for rc_visard 65</li>
<li>approximately 500 mm for rc_visard 160</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The object should be visible in both the left and right camera images.
The distance should be increased if the object is not fully visible at the recommended distance.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">In the <strong>Camera</strong> page, select an <em>Exposure region</em> around the object and check the illumination of the scene.
To get the best result, the gain of the <em>rc_visard</em> should be 0 dB (see <a class="reference internal" href="../rc_visard_general/parameters.html#general-exposure-gain"><span class="std std-ref">Exposure and Gain Settings</span></a>)
and the object should not cast any significant shadow.</p>
<blockquote>
<div><div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../_images/screenshot_template_good.jpg"><img alt="../_images/screenshot_template_good.jpg" src="../_images/screenshot_template_good.jpg" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 28 </span><span class="caption-text">Sample scene with proper lighting conditions.
The gain value is 0 dB and there are no shadows on the object and its vicinity.</span></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="../_images/screenshot_template_gain_too_high.jpg"><img alt="../_images/screenshot_template_gain_too_high.jpg" src="../_images/screenshot_template_gain_too_high.jpg" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 29 </span><span class="caption-text">Sample scene with too little light. The gain value is too high.</span></p>
</div>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="../_images/screenshot_template_shadow.jpg"><img alt="../_images/screenshot_template_shadow.jpg" src="../_images/screenshot_template_shadow.jpg" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 30 </span><span class="caption-text">Sample scene with too strong direct light. The object casts shadows.</span></p>
</div>
</div></blockquote>
</li>
</ol>
<p>All the data necessary for the template generation can be downloaded through the Web GUI
in the <strong>Camera</strong> page by clicking on the camera button below the images.</p>
</div>
</div>
<div class="section" id="measuring-the-object-height">
<h2>Measuring the object height<a class="headerlink" href="#measuring-the-object-height" title="Permalink to this headline">¶</a></h2>
<p>The object height is the distance from the bottom of the object to the plane
on which most of the edges that can be used for matching are lying.
This is not always the highest point! It is crucial to measure this value correctly.
The returned pose of the detected object depends on this value.</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="../_images/object_height.png"><img alt="../_images/object_height.png" src="../_images/object_height.png" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 31 </span><span class="caption-text">Visualization of how different object heights (left) affect the generated template (right).</span></p>
</div>
</div>
<div class="section" id="is-the-object-orientation-needed">
<h2>Is the object orientation needed?<a class="headerlink" href="#is-the-object-orientation-needed" title="Permalink to this headline">¶</a></h2>
<p>For some objects it is possible to create a simplified template that will be detected faster.
This is possible only if the object rotation on the plane is not required for grasping and placing.
Sample images of such objects can be found below.</p>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="../_images/template_orientation_example.png"><img alt="../_images/template_orientation_example.png" src="../_images/template_orientation_example.png" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 32 </span><span class="caption-text">3D model of a round part and two templates generated from it.
With the first template, the object will be detected with full orientation.
If the second template is used, the rotation of the object on the plane will be ignored.</span></p>
</div>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="../_images/template_orientation_example_2.png"><img alt="../_images/template_orientation_example_2.png" src="../_images/template_orientation_example_2.png" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 33 </span><span class="caption-text">3D model of a part with one axis of symmetry and two templates generated from it.
With the first template, the object will be detected with full orientation.
If the second template is used, the detected object might be flipped.</span></p>
</div>
</div>
<div class="section" id="recording-the-scene">
<h2>Recording the scene<a class="headerlink" href="#recording-the-scene" title="Permalink to this headline">¶</a></h2>
<p>The final step is to record images of the object in the actual environment
in which the object needs to be detected.
Roboception will use these images to test the generated template and, if necessary,
suggest changes to improve the detection performance.</p>
<p>For recording the scene, 3 <a class="reference external" href="https://doc.rc-visard.com/latest/en/tagdetect.html#sect-apriltag" title="(in rc_visard v24.01)"><span class="xref std std-ref">AprilTags</span></a> should be placed in the field of view of both cameras.
If a <em>rc_randomdot</em> projector is available, the plane calibration can also be performed using depth data.
In this case, the <em>rc_randomdot</em> projector should be setup as described in the <a class="reference internal" href="../rc_visard_general/projector.html#general-projector"><span class="std std-ref">Obtain dense depth images with the rc_randomdot projector</span></a>
tutorial and the Out 1 mode of the <em>rc_visard</em> should be set to <em>ExposureAlternateActive</em>.</p>
<div class="figure align-center" id="id12">
<a class="reference internal image-reference" href="../_images/example_scene.png"><img alt="../_images/example_scene.png" src="../_images/example_scene.png" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 34 </span><span class="caption-text">Sample recorded scene with 3 AprilTags.</span></p>
</div>
<div class="section" id="id1">
<h3>With the <em>rc_visard</em><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Use the <em>Download snapshot</em> button in the <strong>Camera</strong> page of the Web GUI.</p>
</div>
<div class="section" id="without-the-rc-visard">
<h3>Without the <em>rc_visard</em><a class="headerlink" href="#without-the-rc-visard" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is possible to test the template detection only on images recorded with the <em>rc_visard</em>.
If another camera is used, Roboception will only be able to check the scene and
give some general remarks about background and illumination.</p>
</div>
<p>If the <em>rc_visard</em> can not be used to capture the data, it is also possible to use any other camera.
In order to capture the most valuable data, the camera should be placed in the same position
where the <em>rc_visard</em> will be mounted during production.
The picture has to be sharp and taken without using the flash, as this alters the normal lighting conditions.
If it is not possible to take a sharp picture without a flash, it is strongly recommended
to add an additional external light source.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting started with SilhouetteMatch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="SilhouetteMatch tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Roboception GmbH.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.0-28-g66594de',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/js/open-toggle.js"></script>
      <script type="text/javascript" src="../_static/contentui.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>